<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Creates a  tracepoint by  registering a  callback function  for one  or more tracepoint   events.  Once   the  tracepoint   is  created,   you  can   use [`rb_tracepoint_enable`] to enable the tracepoint."><meta name="keywords" content="rust, rustlang, rust-lang, rb_tracepoint_new"><title>rb_tracepoint_new in rb_sys::bindings - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-6827029ac823cab7.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-ebce58d0a40c3431.css"><link rel="stylesheet" disabled href="../../static.files/dark-f23faae4a2daf9a6.css"><link rel="stylesheet" disabled href="../../static.files/ayu-8af5e100b21cd173.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-c55e1eb52e1886b4.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../rb_sys/index.html"><div class="logo-container"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../rb_sys/index.html"><div class="logo-container"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><div class="sidebar-elems"><h2><a href="index.html">In rb_sys::bindings</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Function <a href="../index.html">rb_sys</a>::<wbr><a href="index.html">bindings</a>::<wbr><a class="fn" href="#">rb_tracepoint_new</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/rb_sys/Users/ryantaylor/Code/vault/target/debug/build/rb-sys-8f1975fcdcff6741/out/bindings-0.9.70-arm64-darwin21-3.2.0.rs.html#16912-16919">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><div class="item-decl"><pre class="rust fn"><code>pub unsafe extern &quot;C&quot; fn rb_tracepoint_new(<br>&nbsp;&nbsp;&nbsp;&nbsp;target_thread_not_supported_yet: <a class="type" href="type.VALUE.html" title="type rb_sys::bindings::VALUE">VALUE</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;events: <a class="type" href="type.rb_event_flag_t.html" title="type rb_sys::bindings::rb_event_flag_t">rb_event_flag_t</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;func: <a class="enum" href="https://doc.rust-lang.org/1.67.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;unsafe extern &quot;C&quot; <a class="primitive" href="https://doc.rust-lang.org/1.67.1/std/primitive.fn.html">fn</a>(arg1: <a class="type" href="type.VALUE.html" title="type rb_sys::bindings::VALUE">VALUE</a>, arg2: <a class="primitive" href="https://doc.rust-lang.org/1.67.1/std/primitive.pointer.html">*mut </a><a class="enum" href="https://doc.rust-lang.org/1.67.1/core/ffi/enum.c_void.html" title="enum core::ffi::c_void">c_void</a>)&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;data: <a class="primitive" href="https://doc.rust-lang.org/1.67.1/std/primitive.pointer.html">*mut </a><a class="enum" href="https://doc.rust-lang.org/1.67.1/core/ffi/enum.c_void.html" title="enum core::ffi::c_void">c_void</a><br>) -&gt; <a class="type" href="type.VALUE.html" title="type rb_sys::bindings::VALUE">VALUE</a></code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Creates a  tracepoint by  registering a  callback function  for one  or more
tracepoint   events.  Once   the  tracepoint   is  created,   you  can   use
<a href="fn.rb_tracepoint_enable.html" title="rb_tracepoint_enable"><code>rb_tracepoint_enable</code></a> to enable the tracepoint.</p>
<ul>
<li><strong>@param</strong> <code>in</code> target_thread_not_supported_yet  Meant   for   picking   the
thread  in which  the tracepoint  is to  be created.
However,   current    implementation   ignore   this
parameter,  tracepoint is  created for  all threads.
Simply specify Qnil.</li>
<li><strong>@param</strong> <code>in</code> events  Event(s) to listen to.</li>
<li><strong>@param</strong> <code>in</code> func    A callback function.</li>
<li><strong>@param</strong> <code>in,out</code> data    Void  pointer that  will be  passed to  the callback
function.</li>
</ul>
<p>When the callback function is called, it will be passed 2 parameters:</p>
<ol>
<li><code>VALUE  tpval</code> -  the TracePoint  object from which  trace args  can be
extracted.</li>
<li><code>void  *data</code> -  A void  pointer which  helps to  share scope  with the
callback function.</li>
</ol>
<p>It is important to note that you cannot register callbacks for normal events
and internal events simultaneously because  they are different purpose.  You
can use  any Ruby APIs  (calling methods and so  on) on normal  event hooks.
However, in  internal events,  you can  not use any  Ruby APIs  (even object
creations).   This is  why we  can’t specify  internal events  by TracePoint
directly.  Limitations are MRI version specific.</p>
<p>Example:</p>
<div class="example-wrap"><pre class="language-CXX"><code>[`rb_tracepoint_new`]
Qnil,
RUBY_INTERNAL_EVENT_NEWOBJ | RUBY_INTERNAL_EVENT_FREEOBJ,
obj_event_i,
data);
</code></pre></div><h3 id="in-this--example-a-callback--function-obj_event_i-will-be--registered-forinternal-----------events----------ruby_internal_event_newobj-----------andruby_internal_event_freeobj"><a href="#in-this--example-a-callback--function-obj_event_i-will-be--registered-forinternal-----------events----------ruby_internal_event_newobj-----------andruby_internal_event_freeobj">In this  example, a callback  function <code>obj_event_i</code> will be  registered for
internal           events          #RUBY_INTERNAL_EVENT_NEWOBJ           and
#RUBY_INTERNAL_EVENT_FREEOBJ.</a></h3>
<p>Generated by <a href="https://github.com/oxidize-rb/rb-sys">rb-sys</a> for Ruby 3.2.0</p>
</div></details></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rb_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.1 (d5a82bbd2 2023-02-07)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>