<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Evaluates the given string."><meta name="keywords" content="rust, rustlang, rust-lang, rb_eval_string"><title>rb_eval_string in rb_sys::bindings - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-6827029ac823cab7.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-ebce58d0a40c3431.css"><link rel="stylesheet" disabled href="../../static.files/dark-f23faae4a2daf9a6.css"><link rel="stylesheet" disabled href="../../static.files/ayu-8af5e100b21cd173.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-c55e1eb52e1886b4.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../rb_sys/index.html"><div class="logo-container"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../rb_sys/index.html"><div class="logo-container"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><div class="sidebar-elems"><h2><a href="index.html">In rb_sys::bindings</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Function <a href="../index.html">rb_sys</a>::<wbr><a href="index.html">bindings</a>::<wbr><a class="fn" href="#">rb_eval_string</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/rb_sys/Users/ryantaylor/Code/vault/target/debug/build/rb-sys-8f1975fcdcff6741/out/bindings-0.9.70-arm64-darwin21-3.2.0.rs.html#5057">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><div class="item-decl"><pre class="rust fn"><code>pub unsafe extern &quot;C&quot; fn rb_eval_string(str_: <a class="primitive" href="https://doc.rust-lang.org/1.67.1/std/primitive.pointer.html">*const </a><a class="type" href="https://doc.rust-lang.org/1.67.1/std/os/raw/type.c_char.html" title="type std::os::raw::c_char">c_char</a>) -&gt; <a class="type" href="type.VALUE.html" title="type rb_sys::bindings::VALUE">VALUE</a></code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Evaluates the given string.</p>
<p>In case  it is called  from within a  C-backended method, the  evaluation is
done under  the current binding.  However  there can be no  method.  On such
situation this  function evaluates  in an  isolated binding,  like <code>require</code>
runs in a separate one.</p>
<p><code>__FILE__</code>  will  be  <code>\&quot;(eval)\&quot;</code>,  and  <code>__LINE__</code>  starts  from  1  in  the
evaluation.</p>
<ul>
<li><strong>@param</strong> <code>in</code> str            Ruby code to evaluate.</li>
<li><strong>@exception</strong> <a href="static.rb_eException.html" title="rb_eException"><code>rb_eException</code></a>  Raises an exception on error.</li>
<li><strong>@return</strong> The evaluated result.</li>
</ul>
<hr />
<h4 id="internal"><a href="#internal">Internal</a></h4>
<p>@shyouhei’s old tale about the birth and growth of this function:</p>
<p>At  the beginning,  there  was no  <a href="fn.rb_eval_string.html" title="rb_eval_string"><code>rb_eval_string</code></a>.   @shyouhei heard  that
@shugo, author of  Apache httpd’s mod_ruby module, requested  @matz for this
API.  He wanted a way so that mod_ruby can evaluate ruby scripts one by one,
separately, in each different contexts.  So  this function was made.  It was
designed to be a global interpreter entry point like ruby_run_node().</p>
<p>The  way it  is implemented  however  allows extension  libraries (not  just
programs like  Apache httpd) to call  this function.  Because its  name says
nothing  about the  initial design,  people  started to  think of  it as  an
orthodox  way  to  call  ruby  level  <code>eval</code>  method  from  their  extension
libraries.  Even our <code>extension.rdoc</code> has had a description of this function
basically according to this understanding.</p>
<p>The old  (mod_ruby like) usage still  works.  But over time,  usages of this
function from extension libraries got  popular, while mod_ruby faded out; is
no  longer maintained  now.  Devs  decided to  actively support  both.  This
function  now auto-detects  how  it is  called, and  switches  how it  works
depending on it.</p>
<ul>
<li><strong>@see</strong> <a href="https://bugs.ruby-lang.org/issues/18780">https://bugs.ruby-lang.org/issues/18780</a></li>
</ul>
<hr />
<p>Generated by <a href="https://github.com/oxidize-rb/rb-sys">rb-sys</a> for Ruby 3.2.0</p>
</div></details></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rb_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.1 (d5a82bbd2 2023-02-07)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>