<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `Replay` struct in crate `vault`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, Replay">

    <title>vault::Replay - Rust</title>

    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='index.html'>vault</a></p><script>window.sidebarCurrent = {name: 'Replay', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>vault</a>::<wbr><a class='struct' href=''>Replay</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                [<span class='inner'>&#x2212;</span>]
            </a>
        </span><a id='src-1328' class='srclink' href='../src/vault/replay.rs.html#52-79' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct Replay {
    pub error: <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a>&gt;,
    pub version: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u16.html'>u16</a>,
    pub game_type: <a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a>,
    pub date_time: <a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a>,
    pub map: <a class='struct' href='../vault/struct.Map.html' title='vault::Map'>Map</a>,
    pub players: <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='struct' href='../vault/struct.Player.html' title='vault::Player'>Player</a>&gt;,
    pub commands: <a class='struct' href='https://doc.rust-lang.org/nightly/std/collections/hash/map/struct.HashMap.html' title='std::collections::hash::map::HashMap'>HashMap</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a>, <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='struct' href='../vault/struct.Command.html' title='vault::Command'>Command</a>&gt;&gt;,
    pub duration: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u32.html'>u32</a>,
    pub rng_seed: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u32.html'>u32</a>,
    pub opponent_type: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u32.html'>u32</a>,
    pub chat: <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='struct' href='../vault/struct.ChatLine.html' title='vault::ChatLine'>ChatLine</a>&gt;,
    // some fields omitted
}</pre><div class='docblock'><p>The main <code>Replay</code> type, contains all currently parsed replay data. Can be serialized to JSON
for output using <code>rustc_serialize</code>.</p>
</div><h2 class='fields'>Fields</h2>
<table><tr class='stab '>
                                  <td id='structfield.error'><code>error</code></td><td><div class='docblock'><p>If parsing failed, this will contain an error string</p>
</div></td></tr><tr class='stab '>
                                  <td id='structfield.version'><code>version</code></td><td><div class='docblock'><p>Game engine version</p>
</div></td></tr><tr class='stab '>
                                  <td id='structfield.game_type'><code>game_type</code></td><td><div class='docblock'><p>Game type (i.e. Automatch/Annihilate)</p>
</div></td></tr><tr class='stab '>
                                  <td id='structfield.date_time'><code>date_time</code></td><td><div class='docblock'><p>Timestamp encoded in replay file</p>
</div></td></tr><tr class='stab '>
                                  <td id='structfield.map'><code>map</code></td><td><div class='docblock'><p>Map this game was played on</p>
</div></td></tr><tr class='stab '>
                                  <td id='structfield.players'><code>players</code></td><td><div class='docblock'><p>Players involved in the game</p>
</div></td></tr><tr class='stab '>
                                  <td id='structfield.commands'><code>commands</code></td><td><div class='docblock'><p>Commands issued per player</p>
</div></td></tr><tr class='stab '>
                                  <td id='structfield.duration'><code>duration</code></td><td><div class='docblock'><p>Game length in seconds</p>
</div></td></tr><tr class='stab '>
                                  <td id='structfield.rng_seed'><code>rng_seed</code></td><td><div class='docblock'><p>Internal RNG seed used by game engine</p>
</div></td></tr><tr class='stab '>
                                  <td id='structfield.opponent_type'><code>opponent_type</code></td><td><div class='docblock'><p>Type of opponent (1 = human, 2 = cpu)</p>
</div></td></tr><tr class='stab '>
                                  <td id='structfield.chat'><code>chat</code></td><td><div class='docblock'><p>List of chat messages sent during replay</p>
</div></td></tr></table><h2 id='methods'>Methods</h2><h3 class='impl'><code>impl <a class='struct' href='../vault/struct.Replay.html' title='vault::Replay'>Replay</a></code></h3><div class='impl-items'><h4 id='method.new' class='method'><code>fn <a href='#method.new' class='fnname'>new</a>(path: &amp;<a class='struct' href='https://doc.rust-lang.org/nightly/std/path/struct.Path.html' title='std::path::Path'>Path</a>, config: <a class='struct' href='../vault/struct.Config.html' title='vault::Config'>Config</a>) -&gt; <a class='type' href='../vault/type.Result.html' title='vault::Result'>Result</a>&lt;<a class='struct' href='../vault/struct.Replay.html' title='vault::Replay'>Replay</a>&gt;</code></h4>
<div class='docblock'><p>Constructs a new <code>Replay</code> and loads the file specified by path into memory.</p>

<h1 id='examples' class='section-header'><a href='#examples'>Examples</a></h1><pre class='rust rust-example-rendered'>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>vault</span>;

<span class='kw'>use</span> <span class='ident'>vault</span>::<span class='ident'>Replay</span>;
<span class='kw'>use</span> <span class='ident'>vault</span>::<span class='ident'>Config</span>;
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>path</span>::<span class='ident'>Path</span>;

<span class='kw'>let</span> <span class='ident'>path</span> <span class='op'>=</span> <span class='ident'>Path</span>::<span class='ident'>new</span>(<span class='string'>&quot;/path/to/replay.rec&quot;</span>);
<span class='kw'>let</span> <span class='ident'>config</span> <span class='op'>=</span> <span class='ident'>Config</span>::<span class='ident'>default</span>();
<span class='kw'>let</span> <span class='ident'>replay</span> <span class='op'>=</span> <span class='ident'>Replay</span>::<span class='ident'>new</span>(<span class='kw-2'>&amp;</span><span class='ident'>path</span>, <span class='ident'>config</span>).<span class='ident'>unwrap</span>();</pre>
</div><h4 id='method.new_with_error' class='method'><code>fn <a href='#method.new_with_error' class='fnname'>new_with_error</a>(name: &amp;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>, err: <a class='enum' href='../vault/enum.Error.html' title='vault::Error'>Error</a>) -&gt; <a class='struct' href='../vault/struct.Replay.html' title='vault::Replay'>Replay</a></code></h4>
<div class='docblock'><p>Constructs a junk <code>Replay</code> type with empty data and an error value set. Used to return a
<code>Replay</code> and its error information out of a thread without panicking if an error was
encountered during creation.</p>

<h1 id='examples-1' class='section-header'><a href='#examples-1'>Examples</a></h1><pre class='rust rust-example-rendered'>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>vault</span>;

<span class='kw'>use</span> <span class='ident'>vault</span>::<span class='ident'>Replay</span>;

<span class='kw'>match</span> <span class='ident'>Replay</span>::<span class='ident'>new</span>(<span class='string'>&quot;/path/to/replay.rec&quot;</span>) {
    <span class='prelude-val'>Ok</span>(<span class='ident'>replay</span>) <span class='op'>=&gt;</span> <span class='ident'>replay</span>,
    <span class='prelude-val'>Err</span>(<span class='ident'>err</span>) <span class='op'>=&gt;</span> <span class='ident'>Replay</span>::<span class='ident'>with_new_error</span>(<span class='ident'>err</span>),
}</pre>
</div><h4 id='method.from_bytes' class='method'><code>fn <a href='#method.from_bytes' class='fnname'>from_bytes</a>(name: &amp;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>, bytes: <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a>&gt;, config: <a class='struct' href='../vault/struct.Config.html' title='vault::Config'>Config</a>) -&gt; <a class='type' href='../vault/type.Result.html' title='vault::Result'>Result</a>&lt;<a class='struct' href='../vault/struct.Replay.html' title='vault::Replay'>Replay</a>&gt;</code></h4>
<div class='docblock'><p>Constructs a new <code>Replay</code> and loads the byte vector given as the file data.</p>

<h1 id='examples-2' class='section-header'><a href='#examples-2'>Examples</a></h1><pre class='rust rust-example-rendered'>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>vault</span>;
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>zip</span>;

<span class='kw'>use</span> <span class='ident'>vault</span>::<span class='ident'>Replay</span>;
<span class='kw'>use</span> <span class='ident'>vault</span>::<span class='ident'>Config</span>;
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>ops</span>::<span class='ident'>Deref</span>;
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>path</span>::<span class='ident'>Path</span>;
<span class='kw'>use</span> <span class='ident'>zip</span>::<span class='ident'>read</span>::{<span class='ident'>ZipArchive</span>, <span class='ident'>ZipFile</span>};

<span class='kw'>let</span> <span class='ident'>path</span> <span class='op'>=</span> <span class='ident'>Path</span>::<span class='ident'>new</span>(<span class='string'>&quot;/path/to/archive.zip&quot;</span>);
<span class='kw'>let</span> <span class='ident'>config</span> <span class='op'>=</span> <span class='ident'>Config</span>::<span class='ident'>default</span>();
<span class='kw'>let</span> <span class='ident'>name</span> <span class='op'>=</span> <span class='ident'>path</span>.<span class='ident'>to_string_lossy</span>();
<span class='kw'>let</span> <span class='ident'>name</span> <span class='op'>=</span> <span class='ident'>name</span>.<span class='ident'>deref</span>();
<span class='kw'>let</span> <span class='ident'>file</span> <span class='op'>=</span> <span class='ident'>File</span>::<span class='ident'>open</span>(<span class='kw-2'>&amp;</span><span class='ident'>path</span>).<span class='ident'>unwrap</span>();
<span class='kw'>let</span> <span class='ident'>archive</span> <span class='op'>=</span> <span class='ident'>ZipArchive</span>::<span class='ident'>new</span>(<span class='ident'>file</span>).<span class='ident'>unwrap</span>();
<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>buff</span>: <span class='ident'>Vec</span><span class='op'>&lt;</span><span class='ident'>u8</span><span class='op'>&gt;</span> <span class='op'>=</span> <span class='ident'>Vec</span>::<span class='ident'>with_capacity</span>(<span class='ident'>replay_file</span>.<span class='ident'>size</span>() <span class='kw'>as</span> <span class='ident'>usize</span>);
<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>replay_file</span> <span class='op'>=</span> <span class='ident'>archive</span>.<span class='ident'>by_index</span>(<span class='number'>0</span>).<span class='ident'>unwrap</span>();

<span class='ident'>replay_file</span>.<span class='ident'>read_to_end</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>buff</span>).<span class='ident'>unwrap</span>();
<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>replay</span> <span class='op'>=</span> <span class='ident'>Replay</span>::<span class='ident'>from_bytes</span>(<span class='kw-2'>&amp;</span><span class='ident'>name</span>, <span class='ident'>buff</span>, <span class='ident'>config</span>).<span class='ident'>unwrap</span>();
<span class='ident'>replay</span>.<span class='ident'>parse</span>();</pre>
</div><h4 id='method.parse' class='method'><code>fn <a href='#method.parse' class='fnname'>parse</a>(&amp;mut self)</code></h4>
<div class='docblock'><p>Parses the loaded replay and populates the <code>Replay</code> type with the return data.</p>

<p>When the replay has finished being parsed, the vector of byte data loaded into memory from
file is dropped. This is done to clean up the resulting type in order to make working with
the output easier. The file cursor property remains, however, and is an accurate
representation of the size of the replay file in bytes.</p>

<h1 id='examples-3' class='section-header'><a href='#examples-3'>Examples</a></h1><pre class='rust rust-example-rendered'>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>vault</span>;

<span class='kw'>use</span> <span class='ident'>vault</span>::<span class='ident'>Replay</span>;
<span class='kw'>use</span> <span class='ident'>vault</span>::<span class='ident'>Config</span>;
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>path</span>::<span class='ident'>Path</span>;

<span class='kw'>let</span> <span class='ident'>path</span> <span class='op'>=</span> <span class='ident'>Path</span>::<span class='ident'>new</span>(<span class='string'>&quot;/path/to/replay.rec&quot;</span>);
<span class='kw'>let</span> <span class='ident'>config</span> <span class='op'>=</span> <span class='ident'>Config</span>::<span class='ident'>default</span>();
<span class='kw'>let</span> <span class='ident'>replay</span> <span class='op'>=</span> <span class='ident'>Replay</span>::<span class='ident'>new</span>(<span class='kw-2'>&amp;</span><span class='ident'>path</span>, <span class='ident'>config</span>).<span class='ident'>unwrap</span>();

<span class='ident'>replay</span>.<span class='ident'>parse</span>();
 
<span class='comment'>// You can serialize the Replay type to JSON after parsing if you would like to print</span>
<span class='comment'>// replay data to stdout or write it to a file.</span>
<span class='comment'>//</span>
<span class='kw'>let</span> <span class='ident'>encoded</span> <span class='op'>=</span> <span class='ident'>replay</span>.<span class='ident'>to_json</span>().<span class='ident'>unwrap</span>();
<span class='macro'>println</span><span class='macro'>!</span>(<span class='string'>&quot;{}&quot;</span>, <span class='ident'>encoded</span>);</pre>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 id='derived_implementations'>Derived Implementations </h3><h3 class='impl'><code>impl <a class='trait' href='../rustc_serialize/serialize/trait.Encodable.html' title='rustc_serialize::serialize::Encodable'>Encodable</a> for <a class='struct' href='../vault/struct.Replay.html' title='vault::Replay'>Replay</a></code></h3><div class='impl-items'><h4 id='method.encode' class='method'><code>fn <a href='../rustc_serialize/serialize/trait.Encodable.html#method.encode' class='fnname'>encode</a>&lt;__S: <a class='trait' href='../rustc_serialize/serialize/trait.Encoder.html' title='rustc_serialize::serialize::Encoder'>Encoder</a>&gt;(&amp;self, __arg_0: &amp;mut __S) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>, __S::Error&gt;</code></h4>
</div><h3 class='impl'><code>impl <a class='trait' href='https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html' title='core::fmt::Debug'>Debug</a> for <a class='struct' href='../vault/struct.Replay.html' title='vault::Replay'>Replay</a></code></h3><div class='impl-items'><h4 id='method.fmt' class='method'><code>fn <a href='https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#method.fmt' class='fnname'>fmt</a>(&amp;self, __arg_0: &amp;mut <a class='struct' href='https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html' title='core::fmt::Formatter'>Formatter</a>) -&gt; <a class='type' href='https://doc.rust-lang.org/nightly/core/fmt/type.Result.html' title='core::fmt::Result'>Result</a></code></h4>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "vault";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script defer src="../search-index.js"></script>
</body>
</html>